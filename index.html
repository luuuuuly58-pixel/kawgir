<!DOCTYPE html>
<html lang="ckb">
<head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WH895F2T47"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WH895F2T47');
</script>

  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>فۆرمی داواکردنی خواردنی هەفتانە</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
   * {
  box-sizing: border-box; /* Include padding and border in width calculations */
}

body {
  font-family: 'Arial', sans-serif;
  background: #f8f9f3;
  color: #2e2e2e;
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  direction: rtl;
  text-align: right;
}

h1 {
  text-align: center;
  font-size: 2.5em;
  font-weight: bold;
  color: #2e2e2e;
  margin-bottom: 20px;
}

section {
  background: #ffffff;
  border: 1px solid #e3e3e3;
  border-radius: 10px;
  margin-bottom: 20px;
  padding: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  max-width: 600px; /* Constrain section width */
  margin-left: auto; /* Center the section horizontally */
  margin-right: auto;
}

.section-title {
  font-size: 1.5em;
  font-weight: bold;
  color: #416619;
  margin-bottom: 20px;
  border-bottom: 2px solid #d4e0d4;
  padding-bottom: 5px;
}

.form-group {
  margin-bottom: 20px;
}

label {
  display: block;
  font-size: 1.2em;
  margin-bottom: 10px;
  color: #2e2e2e;
}

input, select, button {
  width: 100%; /* Allow the input to fit within its parent */
  padding: 10px;
  font-size: 1em;
  color: #2e2e2e;
  background: #fff;
  border: 1px solid #416619;
  border-radius: 5px;
  transition: border 0.3s, box-shadow 0.3s;
}

input::placeholder {
  text-align: right;
}

input:focus, select:focus {
  border-color: #416619;
  box-shadow: 0 0 10px #416619;
  outline: none;
}

button {
  background: #416619;
  border: none;
  cursor: pointer;
  font-weight: bold;
  color: #fff;
  padding: 12px 20px;
  border-radius: 5px;
  transition: background 0.3s, box-shadow 0.3s;
}

button:hover {
  background: #314a14;
}

.output {
  margin-top: 30px;
  padding: 20px;
  background: #f1f5ec;
  border-radius: 10px;
  border: 1px solid #416619;
  color: #2e2e2e;
  font-size: 1.2em;
  max-width: 600px; /* Match section width */
  margin-left: auto;
  margin-right: auto;
}

.output:empty {
  display: none;
}

.logo-container {
  text-align: center;
  margin-bottom: 20px;
}

.logo {
  width: 100px;
  height: auto;
}

  </style>
</head>
<body>
<div class="logo-container">
  <img src="kawgir logo2.png" alt="Logo" class="logo">
</div>

<h1>فۆرمی داواکردنی خواردن_هەفتانە</h1>

<!-- General Information Section -->
<section>
  <h2 class="section-title">زانیاری گشتی</h2>
  <div class="form-group">
    <label for="groupSize">چەند کەسن خواردن داوا دەکەن؟ (کەمترین هەڵبژاردە ٢):</label>
    <input type="number" id="groupSize" min="2" value="2">
  </div>
</section>

<!-- Meal Selection Section -->
<section>
  <h2 class="section-title">هەڵبژاردنی خواردن</h2>
  <form id="mealSelection">
    <div class="form-group">
      <label for="meal-شەممە">خواردن بۆ شەممە هەڵبژێرە:</label>
      <select id="meal-شەممە">
        <option value="5500 selected">مریشک - ٥٥٠٠ دینار</option>
        <option value="7750">گۆشت - ٧٧٥٠ دینار</option>
        <option value="3500">سادە - ٣٥٠٠ دینار</option>
        <option value="0">خواردنمان ناوێت بۆ رۆژی شەممە</option>
      </select>
    </div>
    <div class="form-group">
      <label for="meal-١ شەممە">خواردن بۆ ١ شەممە هەڵبژێرە:</label>
      <select id="meal-یەکشەممە">
        <option value="5500 selected">مریشک - ٥٥٠٠ دینار</option>
        <option value="7750">گۆشت - ٧٧٥٠ دینار</option>
        <option value="3500">سادە - ٣٥٠٠ دینار</option>
        <option value="0">خواردنمان ناوێت بۆ رۆژی ١ شەممە</option>
      </select>
    </div>
    <div class="form-group">
      <label for="meal-٢ شەممە">خواردن بۆ ٢ شەممە هەڵبژێرە:</label>
      <select id="meal-یەکشەممە">
        <option value="5500 selected">مریشک - ٥٥٠٠ دینار</option>
        <option value="7750">گۆشت - ٧٧٥٠ دینار</option>
        <option value="3500">سادە - ٣٥٠٠ دینار</option>
        <option value="0">خواردنمان ناوێت بۆ رۆژی ٢ شەممە</option>
      </select>
    </div>
    <div class="form-group">
      <label for="meal-٣ شەممە">خواردن بۆ ٣ شەممە هەڵبژێرە:</label>
      <select id="meal-یەکشەممە">
        <option value="5500 selected">مریشک - ٥٥٠٠ دینار</option>
        <option value="7750">گۆشت - ٧٧٥٠ دینار</option>
        <option value="3500">سادە - ٣٥٠٠ دینار</option>
        <option value="0">خواردنمان ناوێت بۆ رۆژی ٣ شەممە</option>
      </select>
    </div>
    <div class="form-group">
      <label for="meal-٤ شەممە">خواردن بۆ ٤ شەممە هەڵبژێرە:</label>
      <select id="meal-یەکشەممە">
        <option value="5500 selected">مریشک - ٥٥٠٠ دینار</option>
        <option value="7750">گۆشت - ٧٧٥٠ دینار</option>
        <option value="3500">سادە - ٣٥٠٠ دینار</option>
        <option value="0">خواردنمان ناوێت بۆ رۆژی ٤ شەممە</option>
      </select>
    </div>
    <div class="form-group">
      <label for="meal-٥ شەممە">خواردن بۆ ٥ شەممە هەڵبژێرە:</label>
      <select id="meal-یەکشەممە">
        <option value="5500 selected">مریشک - ٥٥٠٠ دینار دینار</option>
        <option value="7750">گۆشت - ٧٧٥٠ دینار دینار</option>
        <option value="3500">سادە - ٣٥٠٠ دینار دینار</option>
        <option value="0">خواردنمان ناوێت بۆ رۆژی ٥ شەممە</option>
      </select>
    </div>
  </form>
</section>

<!-- Delivery Information Section -->
<section>
  <h2 class="section-title">زانیاری گەیاندن</h2>
  <div class="form-group">
    <label for="area">ناوچەی گەیاندن:</label>
    <select id="area">
      <option value="3000" selected>سلێمانی - ٣٠٠٠ دینار</option>
    </select>
  </div>
  <div class="form-group">
    <label for="address">ناونیشانی ورد:</label>
    <input type="text" id="address" placeholder="ناونیشانی ورد بنووسە + ژمارەی خانوو \ باڵەخانە">
  </div>
  <div class="form-group">
    <label for="time">کاتى گەیاندن:</label>
    <select id="time" class="time-select">
      <option value="12:00">12:00</option>
      <option value="12:30">12:30</option>
      <option value="1:00">1:00</option>
      <option value="1:30">1:30</option>
      <option class="separator" disabled>----------</option>
      <option value="17:00">17:00</option>
      <option value="17:30">17:30</option>
      <option value="18:00">18:00</option>
      <option value="18:30">18:30</option>
    </select>
  </div>
</section>

<button onclick="calculateTotal()">هەژمارکردنی کۆی گشتی</button>

<div class="output" id="output"></div>

<!-- User Information Section -->
<section id="userInfoSection" style="display:none;">
  <h2 class="section-title">زانیاری تاکە کەس</h2>
  <div class="form-group">
    <label for="userName">ناوی تاکە کەس:</label>
    <input type="text" id="userName" placeholder="ناوت بنووسە">
  </div>
  <div class="form-group">
    <label for="userPhone">ژمارەی تەلەفۆن:</label>
    <input type="text" id="userPhone" placeholder="ژمارەی تەلەفۆن بنووسە">
  </div>
  <button id="submitData">ناردنی زانیاریەکان</button>
</section>

<script>
  // Calculate Total Function (unchanged)
  function calculateTotal() {
    const meals = document.querySelectorAll('select[id^="meal-"]');
    const areaCost = parseInt(document.getElementById('area').value);
    const groupSize = parseInt(document.getElementById('groupSize').value);

    let mealCost = 0;
    let deliveryDays = 0;

    // Calculate the total meal cost and count delivery days
    meals.forEach(meal => {
      const mealPrice = parseInt(meal.value);
      if (mealPrice > 0) {
        mealCost += mealPrice;
        deliveryDays++;
      }
    });

    if (deliveryDays < 3) {
      alert('ببورن، پێویستە بە لانی کەمەوە بۆ ٣ ڕۆژ خواردن داوا بکەن.');
      return;
    }

    const deliveryCost = deliveryDays * areaCost;
    const totalCost = mealCost + deliveryCost;
    const costPerPerson = (totalCost / groupSize).toFixed(2);

    document.getElementById('output').innerHTML = `
      کۆی نرخی خواردنەکان: ${mealCost.toLocaleString()} دینار <br>
      کۆی نرخی گەیاندن بۆ سەرجەم ئەو رۆژانەی خواردن داوا کراوە: ${deliveryCost.toLocaleString()} دینار <br>
      کۆی گشتی: ${totalCost.toLocaleString()} دینار <br>
      کۆی تێچوو لەسەر هەر کەسێک : ${parseFloat(costPerPerson).toLocaleString()} دینار
    `;

    document.getElementById('userInfoSection').style.display = 'block';
  }

  // Submit Data to Google Sheets
  document.getElementById('submitData').addEventListener('click', () => {
    const userName = document.getElementById('userName').value;
    const userPhone = document.getElementById('userPhone').value;
    const groupSize = document.getElementById('groupSize').value;
    const address = document.getElementById('address').value;
    const time = document.getElementById('time').value;
    const meals = Array.from(document.querySelectorAll('select[id^="meal-"]')).map(meal => ({
      day: meal.id.split('-')[1],
      meal: meal.options[meal.selectedIndex].text,
    }));

    const data = {
      userName,
      userPhone,
      groupSize,
      address,
      time,
      meals,
    };

    // Debugging: Log the data being sent
    console.log("Data being sent:", data);

    fetch("https://script.google.com/macros/s/AKfycbyWvyxwSGOKs8g-6Htct8v76j1z-bnfSiWuqcH14wdljtifKzG77fUu5d6Fr8pYYv3p1g/exec", {
      method: "POST",
      body: JSON.stringify(data),
      headers: {
        "Content-Type": "application/json",
      },
      mode: "no-cors", // Add this line
    })
    .then(response => {
      console.log("Submission successful:", response);
      alert("زانیاریەکان بە سەرکەوتوویی نێردرا!");
    })
    .catch(error => {
      console.error("Submission error:", error);
      alert("هەڵە ڕوویدا، تکایە دووبارە هەوڵ بدە.");
    });
  });
</script>




</body>
</html>
